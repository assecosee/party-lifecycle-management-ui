@if (surveyTemplate) {
<div class="survey-card-wrapper">
  <mat-card appearance="outlined" class="survey-task-card">
    <mat-card-header class='survey-task-header'>
      <mat-card-title class="survey-task-title" class="survey-flex-row-wrap">
        <span class="survey-title-text">{{surveyTemplate?.info?.title | translateAseeRest:locale.language}}</span>
      </mat-card-title>
      <button mat-icon-button [matMenuTriggerFor]="appMenu" class="survey-menu-icon">
        <mat-icon class="survey-sort-icon" color="menu">more_vert</mat-icon>
      </button>
    </mat-card-header>
    <mat-card-content>
      @if (formGroup) {
      <form class='survey-generic-form'>
        <cdk-accordion class="survey-accordion">
          @for (item of items; track item; let index = $index) {
          <cdk-accordion-item [expanded]=" index == 0 ? true: false" #accordionItem="cdkAccordionItem"
            class="survey-accordion-item" role="button" tabindex="0" [attr.id]="'accordion-header-' + index"
            [attr.aria-expanded]="accordionItem.expanded" [attr.aria-controls]="'accordion-body-' + index">
            <div class="survey-accordion-item-header" (click)="accordionItem.toggle()">
              <div class="item-title">{{ item }}</div>
              <span class="survey-accordion-item-description" translate>
                @if(!accordionItem.expanded) {
                <mat-icon>expand_more</mat-icon>
                }
                @if(accordionItem.expanded) {
                <mat-icon>expand_less</mat-icon>
                }
              </span>
            </div>
            <div class="survey-accordion-item-body" role="region" [style.display]="accordionItem.expanded ? '' : 'none'"
              [attr.id]="'accordion-body-' + index" [attr.aria-labelledby]="'accordion-header-' + index">
              <generic-form *ngIf="hashMapFormFields" #genericForm (formFieldsLoaded)="loadedFormGroup($event)"
                [formGroup]="formGroup" [formFields]="hashMapFormFields[index]"></generic-form>
            </div>
          </cdk-accordion-item>
          }
        </cdk-accordion>
      </form>
      }
    </mat-card-content>
    @if (formGroup){
    <mat-card-actions class="customer-actions">
      <div class="process-actions-container">
        <div class="button-group">
          <button mat-button
            [disabled]="!formGroup.valid || submitDisabled"
            color="primary"
            (click)="complate()"
            >
            <span translate>{{submitButtonName}}</span>
          </button>
        </div>
      </div>      
    </mat-card-actions>
    }
  </mat-card>
</div>
}
<mat-menu #appMenu="matMenu">
  <unclaim-task [taskId]="taskId"></unclaim-task>
  <!-- <task-events [eventNames]="task.eventNames" [applicationNumber]='task.businessKey'></task-events> -->
</mat-menu>