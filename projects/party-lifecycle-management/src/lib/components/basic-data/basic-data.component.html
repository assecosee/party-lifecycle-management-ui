<div class="card-wrapper">
  <mat-card appearance="outlined" class="task-card">
    <mat-card-header class="task-header">
      <mat-card-title class="task-title flex-row-wrap">
        <span class="title-text">
          {{ task?.name | translate : locale.language }}
        </span>
      </mat-card-title>
    </mat-card-header>
    @if(formGroupInitialized) {
    <mat-card-content class="pt">
      <div class="flex-container">
        <div class="flex-item">
          <asee-autocomplete
            #typeOfClientAutocomplete
            appearance="outline"
            [control]="formGroup.controls['typeOfClient']"
            [autocompleteList]="typeOfClientList"
            [label]="'lblTypeOfClient' | translate : locale.language"
            filterBehaviour="includes"
            labelProperty="description"
            valueProperty="name"
            (click)="markAsTouched('typeOfClient')"
          ></asee-autocomplete>
          <error-handling [control]="formGroup.controls['typeOfClient']"></error-handling>
        </div>
        @if(formGroup.controls['typeOfClient'].value != -1){
        <div class="flex-item">
          <asee-text-input
            appearance="outline"
            [readonly]="!isRegistration"
            [control]="formGroup.controls['registrationNumber']"
            [label]="'lblRegistrationNumber' | translate : locale.language"
          >
          </asee-text-input>
          <error-handling
            [control]="formGroup.controls['registrationNumber']"
          ></error-handling>
        </div>
        } @else {
        <div class="flex-item"></div>
        }
      </div>
      @if(formGroup.controls['typeOfClient'] &&
      formGroup.controls['typeOfClient'].value &&
      formGroup.controls['typeOfClient'].value['value'] == '1'){

      <div class="flex-container pt">
        <div class="flex-item">
          <asee-text-input
            appearance="outline"
            [readonly]="!isRegistration"
            [control]="formGroup.controls['organizationalPartOfCustomer']"
            [label]="
              'lblOrganizationalPartOfCustomer' | translate : locale.language
            "
          >
          </asee-text-input>
          <error-handling
            [control]="formGroup.controls['organizationalPartOfCustomer']"
          ></error-handling>
        </div>
        <div class="flex-item">
          <asee-text-input
            appearance="outline"
            [readonly]="!isRegistration"
            [control]="formGroup.controls['shortNameOfClient']"
            [label]="'lblShortNameOfClient' | translate : locale.language"
          >
          </asee-text-input>
          <error-handling
            [control]="formGroup.controls['shortNameOfClient']"
          ></error-handling>
        </div>
      </div>
      <div class="flex-container pt">
        <div class="flex-item">
          <asee-autocomplete
            #countryOfHqOfficialAddressAutocomplete
            filterBehaviour="includes"
            appearance="outline"
            [control]="
              formGroup.controls['countryOfHeadquartersOfficialAddress']
            "
            [autocompleteList]="countriesList"
            [label]="
              'lblCountryOfHeadquartersOfficialAddress'
                | translate : locale.language
            "
            labelProperty="name"
            valueProperty="name"
            (click)="markAsTouched('countryOfHeadquartersOfficialAddress')"
          ></asee-autocomplete>
          <error-handling
            [control]="
              formGroup.controls['countryOfHeadquartersOfficialAddress']
            "
          ></error-handling>
        </div>
        <div class="flex-item">
          <asee-autocomplete
            filterBehaviour="includes"
            #countryOfOriginAutocomplete
            appearance="outline"
            [control]="formGroup.controls['countryOfOrigin']"
            [autocompleteList]="countriesList"
            [label]="'lblCountryOfOrigin' | translate : locale.language"
            labelProperty="name"
            valueProperty="name"
            (click)="markAsTouched('countryOfOrigin')"
          ></asee-autocomplete>
          <error-handling
            [control]="formGroup.controls['countryOfOrigin']"
          ></error-handling>
        </div>
      </div>
      <div class="flex-container pt">
        <div class="flex-item">
          <asee-autocomplete
            #subjectTypeInAPRAutocomplete
            appearance="outline"
            [control]="formGroup.controls['subjectTypeInAPR']"
            [autocompleteList]="typeOfAPRList"
            [label]="'lblSubjectTypeInAPR' | translate : locale.language"
            filterBehaviour="includes"
            labelProperty="description"
            valueProperty="name"
            (click)="markAsTouched('subjectTypeInAPR')"
          ></asee-autocomplete>
          <error-handling
            [control]="formGroup.controls['subjectTypeInAPR']"
          ></error-handling>
        </div>
        <div class="flex-item">
          <asee-checkbox
            id="checkbox"
            [readonly]="isRegistration"
            [control]="formGroup.controls['clientActivity']"
            color="primary"
            [label]="'lblClientActivity' | translate : locale.language"
          ></asee-checkbox>
        </div>
      </div>
      } @if(formGroup.controls['typeOfClient'] &&
      formGroup.controls['typeOfClient'].value &&
      formGroup.controls['typeOfClient'].value['value'] == '0'){
      <div class="flex-container pt">
        <div class="flex-item">
          <asee-text-input
            appearance="outline"
            [control]="formGroup.controls['clientName']"
            [label]="'lblClientName' | translate : locale.language"
          >
          </asee-text-input>
          <error-handling
            [control]="formGroup.controls['clientName']"
          ></error-handling>
        </div>
        <div class="flex-item">
          <asee-text-input
            appearance="outline"
            [control]="formGroup.controls['parentName']"
            [label]="'lblParentName' | translate : locale.language"
          >
          </asee-text-input>
          <error-handling
            [control]="formGroup.controls['parentName']"
          ></error-handling>
        </div>
      </div>
      <div class="flex-container pt">
        <div class="flex-item">
          <asee-text-input
            appearance="outline"
            [control]="formGroup.controls['clientLastName']"
            [label]="'lblClientLastName' | translate : locale.language"
          >
          </asee-text-input>
          <error-handling
            [control]="formGroup.controls['clientLastName']"
          ></error-handling>
        </div>
        <div class="flex-item">
          <asee-autocomplete
            #countryOfficialAddressAutocomplete
            filterBehaviour="includes"
            appearance="outline"
            [control]="formGroup.controls['countryOfficialAddress']"
            [autocompleteList]="countriesList"
            [label]="'lblCountryOfficialAddress' | translate : locale.language"
            labelProperty="name"
            valueProperty="name"
            (click)="markAsTouched('countryOfficialAddress')"
          ></asee-autocomplete>
          <error-handling
            [control]="formGroup.controls['countryOfficialAddress']"
          ></error-handling>
        </div>
      </div>
      <div class="flex-container pt">
        <div class="flex-item">
          <asee-autocomplete
            filterBehaviour="includes"
            #clientCitizenshipAutocomplete
            appearance="outline"
            [control]="formGroup.controls['clientCitizenship']"
            [autocompleteList]="countriesList"
            [label]="'lblClientCitizenship' | translate : locale.language"
            labelProperty="name"
            valueProperty="name"
            (click)="markAsTouched('clientCitizenship')"
          ></asee-autocomplete>
          <error-handling
            [control]="formGroup.controls['clientCitizenship']"
          ></error-handling>
        </div>
        @if(showClientDateOfBirthPicker) {
        <div class="flex-item">
          <asee-datepicker
            #clientDateOfBirthPicker
            appearance="outline"
            [control]="formGroup.controls['clientDateOfBirth']"
            (click)="markAsTouched('clientDateOfBirth')"
            startView="month"
            [label]="'lblClientDateOfBirth' | translate : locale.language"
            [max]="maxDate"
          ></asee-datepicker>
          <error-handling
            [control]="formGroup.controls['clientDateOfBirth']"
          ></error-handling>
        </div>
        }
      </div>
      <div class="flex-container pt">
        <div class="flex-item">
          <asee-autocomplete
            #clientCountryOfBirthAutocomplete
            filterBehaviour="includes"
            appearance="outline"
            [control]="formGroup.controls['clientCountryOfBirth']"
            [autocompleteList]="countriesList"
            [label]="'lblClientCountryOfBirth' | translate : locale.language"
            labelProperty="name"
            valueProperty="name"
            (click)="markAsTouched('clientCountryOfBirth')"
          ></asee-autocomplete>
          <error-handling
            [control]="formGroup.controls['clientCountryOfBirth']"
          ></error-handling>
        </div>
        <div class="flex-item">
          <asee-checkbox
            id="checkbox"
            [readonly]="isRegistration"
            [control]="formGroup.controls['clientActivity']"
            color="primary"
            [label]="'lblClientActivity' | translate : locale.language"
          ></asee-checkbox>
        </div>
      </div>
      }
    </mat-card-content>
    <div class="bottom-end-alignment">
      <customer-actions
        [currentTask]="task"
        submitButtonName="Complete"
        [formGroup]="formGroup"
      >
      </customer-actions>
    </div>
    }
  </mat-card>
</div>
